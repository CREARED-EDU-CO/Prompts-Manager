/*
 * Este archivo es parte del proyecto Prompts-Manager.
 *
 * Copyright (C) 2025 CREARED.EDU.CO
 *
 * Este programa es software libre: puedes redistribuirlo y/o modificarlo 
 * bajo los términos de la Licencia Pública General Affero de GNU publicada 
 * por la Free Software Foundation, ya sea la versión 3 de la Licencia, 
 * o (a tu elección) cualquier versión posterior.
 *
 * Este programa se distribuye con la esperanza de que sea útil, 
 * pero SIN NINGUNA GARANTÍA; sin incluso la garantía implícita de 
 * COMERCIABILIDAD o IDONEIDAD PARA UN PROPÓSITO PARTICULAR. 
 * Consulta la Licencia Pública General Affero de GNU para más detalles.
 *
 * Deberías haber recibido una copia de la Licencia Pública General Affero de GNU 
 * junto con este programa. En caso contrario, consulta <https://www.gnu.org/licenses/agpl-3.0.html>.
 */

/* 
  ================================================================================
  SISTEMA MODAL CSS: Componentes de overlay y diálogos modales
  ================================================================================
  
  PATRÓN MODAL: Implementación de overlay pattern para diálogos críticos
  ACCESSIBILITY: Cumple WCAG guidelines para modal dialogs
  FOCUS MANAGEMENT: Preparado para focus trap via JavaScript
  ESCAPE HANDLING: Diseñado para cierre con tecla Escape
  BACKDROP: Overlay semi-transparente para context switching
  Z-INDEX STACKING: Niveles altos para aparecer sobre todo el contenido
  
  FLUJO DE INTERACCIÓN:
  1. JavaScript muestra modal agregando clase 'active'
  2. CSS transitions proporcionan animación de entrada/salida
  3. Focus trap mantiene navegación por teclado dentro del modal
  4. Backdrop click o Escape key cierran el modal
  5. Promise-based API para confirmaciones (showConfirmModal)
*/

/* 
  CONTENIDO BASE MODAL: Estilo fundamental para todos los modales
  RESPONSIVE: Constraints min/max-width para adaptabilidad
  CENTERED: Text-align center para contenido simétrico
  ELEVATED: Background principal para máximo contraste
  GENEROUS PADDING: Espaciado asimétrico calculado para respiración visual
  RELATIVE POSITIONING: Contexto para elementos absolutos internos
*/
.modal-content-base {
    background: var(--main-background);  /* Fondo principal - Máximo contraste para legibilidad */
    border-radius: var(--border-radius-lg); /* Radio grande - Esquinas suaves modernas */
    padding: var(--spacing-xl) calc(var(--spacing-xl) + var(--spacing-md)) var(--spacing-lg) calc(var(--spacing-xl) + var(--spacing-md)); /* Padding asimétrico calculado - Más horizontal para respiración */
    min-width: 320px;                   /* Ancho mínimo - Asegura usabilidad en móviles */
    max-width: 90vw;                    /* Ancho máximo - Previene overflow en pantallas pequeñas */
    position: relative;                 /* Posicionamiento relativo - Contexto para elementos internos */
    text-align: center;                 /* Centrado - Alineación simétrica del contenido */
}

/* 
  MODAL DE CONFIRMACIÓN: Overlay principal para diálogos críticos
  FULLSCREEN OVERLAY: Cubre toda la pantalla para context switching
  BACKDROP: Fondo semi-transparente para enfocar atención en modal
  FLEXBOX CENTERING: Centrado perfecto horizontal y vertical
  VISIBILITY CONTROL: Manejo de visibilidad via JavaScript con transiciones
  HIGH Z-INDEX: Aparece sobre todo el contenido de la aplicación
  TRANSITION TIMING: Opacity inmediata, visibility con delay para smooth exit
*/
#confirm-modal {
    position: fixed;                    /* Posicionamiento fijo - Relativo al viewport */
    top: 0;                            /* Posición superior - Cubre desde arriba */
    left: 0;                           /* Posición izquierda - Cubre desde izquierda */
    right: 0;                          /* Posición derecha - Cubre hasta derecha */
    bottom: 0;                         /* Posición inferior - Cubre hasta abajo */
    background: rgba(0, 0, 0, 0.4);    /* Backdrop semi-transparente - Context switching visual */
    z-index: 3000;                     /* Z-index alto - Aparece sobre todo el contenido */
    display: flex;                     /* Layout flex - Para centrado perfecto */
    align-items: center;               /* Centrado vertical - Alineación vertical del modal */
    justify-content: center;           /* Centrado horizontal - Alineación horizontal del modal */
    visibility: hidden;                /* Invisible por defecto - Estado inicial oculto */
    opacity: 0;                        /* Transparente inicial - Para transición de entrada */
    transition: opacity var(--transition-fast), visibility 0s var(--transition-fast); /* Transiciones - Opacity inmediata, visibility con delay */
}

#confirm-modal.active {
    visibility: visible;
    opacity: 1;
    transition: opacity var(--transition-fast);
}

#confirm-modal .modal-box {
    box-shadow: var(--shadow-lg);
    margin: auto;
    transform: scale(0.95);
    transition: transform var(--transition-fast);
}

#confirm-modal.active .modal-box {
    transform: scale(1);
}

#confirm-modal .modal-msg {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-lg);
    color: var(--text-color-primary);
}

#confirm-modal .modal-actions {
    display: flex;
    justify-content: center;
    gap: var(--spacing-xl);
}

#edit-prompt-modal .modal-box,
.import-choice-panel {
    box-shadow: var(--shadow-md);
    border: 1.5px solid var(--primary-color);
    margin: 0 0 var(--spacing-xl) 0;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    align-items: flex-start;
    text-align: left;
}

.modal-title {
    margin-bottom: var(--spacing-md);
    font-size: var(--font-size-lg);
    font-weight: 500;
}

#edit-prompt-modal form {
    background: var(--background-card);
    border-radius: var(--border-radius-md);
    border: 1.5px solid var(--primary-color);
    box-shadow: var(--shadow-md);
    padding: var(--spacing-md) var(--spacing-lg);
    margin-bottom: 0;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    align-items: stretch;
    width: 100%;
    box-sizing: border-box;
}

.import-choice-panel .modal-actions {
    background: none;
    box-shadow: none;
    border: none;
    padding: 0;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    margin-top: 0;
    width: 100%;
    box-sizing: border-box;
}

.import-choice-panel .modal-msg {
    margin-bottom: var(--spacing-md);
    font-size: var(--font-size-base);
    color: var(--text-color-primary);
}
