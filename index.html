<!DOCTYPE html>
<!-- 
  ARQUITECTURA SEMÃNTICA: Documento HTML5 que implementa una aplicaciÃ³n SPA (Single Page Application)
  para gestiÃ³n de prompts de IA con arquitectura MVC modular y sistema de eventos desacoplado.
  
  FLUJO DE DEPENDENCIAS CRÃTICAS:
  1. CSS: variables.css â†’ utilities.css â†’ base.css â†’ layout.css â†’ components.css â†’ modals.css â†’ responsive.css â†’ dark-mode.css
  2. JS: constants.js â†’ eventBus.js â†’ performance.js â†’ utils.js â†’ domUtils.js â†’ i18n.js â†’ storage.js â†’ models â†’ view/* â†’ controllers/* â†’ controller.js â†’ app.js
  
  PATRONES DE DISEÃ‘O IMPLEMENTADOS:
  - MVC (Model-View-Controller): SeparaciÃ³n clara de responsabilidades
  - Observer Pattern: EventBus para comunicaciÃ³n inter-mÃ³dulos
  - Module Pattern: EncapsulaciÃ³n de funcionalidades en namespaces globales
  - Strategy Pattern: MÃºltiples controladores especializados
  - Factory Pattern: GeneraciÃ³n dinÃ¡mica de elementos DOM
-->
<html lang="es">

<head>
  <!-- CONFIGURACIÃ“N DE CODIFICACIÃ“N Y VIEWPORT: UTF-8 para soporte internacional, viewport responsive -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prompt Manager</title>
  
  <!-- 
    JERARQUÃA DE ESTILOS CSS: Orden crÃ­tico para cascada correcta
    1. variables.css: DefiniciÃ³n de custom properties CSS para theming
    2. utilities.css: Clases de utilidad atÃ³micas
    3. base.css: Reset CSS y estilos base
    4. layout.css: Sistema de layout con CSS Grid/Flexbox
    5. forms.css: Estilos especÃ­ficos para elementos de formulario
    6. components.css: Componentes reutilizables
    7. modals.css: Sistema modal con overlay y accesibilidad
    8. responsive.css: Media queries para adaptabilidad
    9. dark-mode.css: ImplementaciÃ³n de tema oscuro con data-theme
  -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/utilities.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/forms.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/modals.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/dark-mode.css">
</head>

<body>
  <!-- 
    ESTRUCTURA SEMÃNTICA PRINCIPAL: Elemento <main> como contenedor principal para accesibilidad
    ARIA LANDMARKS: NavegaciÃ³n semÃ¡ntica para lectores de pantalla
  -->
  <main>
    <!-- 
      HEADER SEMÃNTICO: TÃ­tulo principal con internacionalizaciÃ³n
      SISTEMA I18N: Atributo data-i18n vinculado a window.MESSAGES para traducciÃ³n dinÃ¡mica
    -->
    <header class="app-header">
      <h1 class="app-title" data-i18n="ui.appTitle">ADMINISTRADOR DE PROMPTS</h1>
    </header>

    <!-- 
      FORMULARIO PRINCIPAL DE CREACIÃ“N DE PROMPTS
      CONTROLADOR: PromptFormController maneja eventos submit y validaciÃ³n
      FLUJO DE DATOS: input â†’ validaciÃ³n â†’ PromptsModel.addPrompt() â†’ Storage.savePrompts() â†’ View.renderPrompts()
      ACCESIBILIDAD: Labels visualmente ocultos pero accesibles para screen readers
    -->
    <form id="prompt-form">
      <!-- TEXTAREA PRINCIPAL: Auto-resize implementado en View.attachAutoResize() -->
      <label for="prompt-input" class="visually-hidden" data-i18n="ui.newPromptLabel"></label>
      <textarea id="prompt-input" class="prompt-input" data-i18n-placeholder="ui.newPromptPlaceholder"
        placeholder="Escribe un nuevo prompt..." required></textarea>
      
      <!-- CONTENEDOR DE MENSAJES: Feedback visual para validaciones -->
      <div id="prompt-msg"></div>
      
      <!-- FILA DE CONTROLES: Tags, selector de carpeta y botÃ³n de envÃ­o -->
      <div class="prompt-form-row">
        <!-- INPUT DE ETIQUETAS: SeparaciÃ³n por comas, procesamiento en PromptFormController -->
        <label for="tags-input" class="visually-hidden" data-i18n="ui.tagsLabel"></label>
        <input type="text" id="tags-input" class="tags-input form-input-text" data-i18n-placeholder="ui.tagsPlaceholder"
          placeholder="Etiquetas (separadas por coma)">
        
        <!-- SELECTOR DE CARPETA: Poblado dinÃ¡micamente por View.updateFolderSelect() -->
        <label for="folder-select" class="visually-hidden" data-i18n="ui.selectFolderLabel"></label>
        <select id="folder-select" class="folder-select form-input-text">
          <option value="" disabled selected data-i18n="ui.selectFolderOption"></option>
        </select>
        
        <!-- BOTÃ“N DE ENVÃO: Trigger para validaciÃ³n y creaciÃ³n de prompt -->
        <button type="submit" class="btn btn-primary add-btn" data-i18n="ui.add"></button>
      </div>
    </form>

    <!-- 
      SECCIÃ“N DE GESTIÃ“N DE CARPETAS
      CONTROLADOR: FoldersController maneja CRUD de carpetas
      MODELO: FoldersModel almacena estructura jerÃ¡rquica de carpetas
      RENDERIZADO: View.renderFolders() con colapso dinÃ¡mico para performance
    -->
    <section id="folders-section" class="main-content-section">
      <!-- FORMULARIO DE CREACIÃ“N DE CARPETAS: ValidaciÃ³n de duplicados en FoldersModel.addFolder() -->
      <form id="folder-form">
        <label for="folder-input" class="visually-hidden" data-i18n="ui.newFolderLabel"></label>
        <input type="text" id="folder-input" class="form-input-text" data-i18n-placeholder="ui.newFolderPlaceholder"
          required>
        <button type="submit" class="btn btn-primary" data-i18n="ui.createFolder"></button>
        
        <!-- CONTADOR DINÃMICO: Actualizado por View.updateTotalPromptsAndReminder() -->
        <span id="total-prompts-count" class="prompt-count"></span>
      </form>
      
      <!-- CONTENEDOR DE LISTA DE CARPETAS: Renderizado dinÃ¡mico con lazy loading -->
      <div id="folders-list"></div>
    </section>

    <!-- 
      SISTEMA DE FILTROS AVANZADO
      CONTROLADOR: FiltersController gestiona estado de filtros y sincronizaciÃ³n
      PATRÃ“N OBSERVER: Cambios en filtros disparan re-renderizado automÃ¡tico
      PERFORMANCE: Debounce en bÃºsqueda de texto para optimizar consultas
    -->
    <section id="filters" class="filters-section">
      <!-- FILA DE BÃšSQUEDA: Input de texto con debounce y botÃ³n de limpieza -->
      <div class="filters-search-row">
        <label for="search-input" class="visually-hidden" data-i18n="ui.searchLabel"></label>
        <input type="text" id="search-input" class="search-input" data-i18n-placeholder="ui.searchPlaceholder">
        <button type="button" class="btn btn-primary" id="clear-filters-btn" data-i18n="ui.clearFilters"></button>
      </div>
      
      <!-- FILA DE FILTROS ESPECÃFICOS: Selectores dinÃ¡micos poblados por View -->
      <div class="filters-row">
        <!-- FILTRO POR ETIQUETAS: Opciones generadas dinÃ¡micamente desde prompts existentes -->
        <label for="tag-filter" class="visually-hidden" data-i18n="ui.filterByTag"></label>
        <select id="tag-filter" class="tag-filter form-input-text">
          <option value="" data-i18n="ui.allTags"></option>
        </select>
        
        <!-- FILTRO POR CARPETAS: Sincronizado con FoldersModel.folders -->
        <label for="folder-filter" class="visually-hidden" data-i18n="ui.filterByFolder"></label>
        <select id="folder-filter" class="folder-filter form-input-text">
          <option value="" data-i18n="ui.allFolders"></option>
        </select>
        
        <!-- FILTRO DE ORDENAMIENTO: MÃºltiples criterios (creaciÃ³n, ediciÃ³n, uso) -->
        <label for="order-filter" class="visually-hidden" data-i18n="ui.orderBy"></label>
        <select id="order-filter" class="order-filter form-input-text">
          <option value="" data-i18n="ui.orderByCreated"></option>
          <option value="updatedAt" data-i18n="ui.orderByEdited"></option>
          <option value="usage" data-i18n="ui.orderByUsage"></option>
        </select>
        
        <!-- FILTRO DE FAVORITOS: Checkbox para mostrar solo prompts marcados -->
        <label for="fav-filter"><input type="checkbox" id="fav-filter"> <span
            data-i18n="ui.onlyFavorites"></span></label>
      </div>
    </section>

    <!-- 
      SECCIÃ“N DE IMPORTACIÃ“N/EXPORTACIÃ“N
      CONTROLADOR: ImportExportController maneja File System Access API y FileReader API
      FUNCIONALIDADES: ExportaciÃ³n filtrada, importaciÃ³n con validaciÃ³n, backup automÃ¡tico
      FORMATOS: JSON estructurado con validaciÃ³n de esquema
    -->
    <section id="import-export-section" class="main-content-section">
      <!-- INFORMACIÃ“N CONTEXTUAL: Explica comportamiento de exportaciÃ³n filtrada -->
      <div class="import-export-info" data-i18n="ui.exportInfo"></div>
      
      <!-- BOTÃ“N DE EXPORTACIÃ“N: Usa File System Access API con fallback a download -->
      <button id="export-json-btn" class="btn btn-primary" data-i18n="ui.export"></button>
      
      <!-- INPUT DE ARCHIVO OCULTO: Trigger para importaciÃ³n de JSON -->
      <input type="file" id="import-json-input" accept="application/json" style="display:none">
      <button id="import-json-btn" class="btn btn-primary" data-i18n="ui.import"></button>
      
      <!-- BOTÃ“N DE ELIMINACIÃ“N TOTAL: ConfirmaciÃ³n modal obligatoria -->
      <button id="delete-all-prompts-btn" class="btn btn-danger delete-btn" data-i18n="ui.deleteAll"></button>
      
      <!-- CONTENEDORES DE MENSAJES: Feedback de operaciones de I/O -->
      <span id="import-msg"></span>
      <span id="export-reminder" class="export-reminder"></span>
    </section>

    <!-- 
      PANEL MODAL DE ELECCIÃ“N DE IMPORTACIÃ“N
      PATRÃ“N MODAL: Overlay con focus trap y escape handling
      OPCIONES: Reemplazar (destructivo) vs Fusionar (aditivo)
      ACCESIBILIDAD: role="dialog", aria-modal, aria-labelledby para screen readers
    -->
    <section id="import-choice-panel" class="import-choice-panel modal-content-base" role="dialog" aria-modal="true"
      aria-labelledby="import-choice-msg" tabindex="-1" style="display:none;">
      <!-- MENSAJE EXPLICATIVO: Contexto para decisiÃ³n del usuario -->
      <div class="modal-msg" id="import-choice-msg" data-i18n="ui.importChoiceMsg"></div>
      
      <!-- ACCIONES MODALES: Botones con aria-label para accesibilidad -->
      <div class="modal-actions">
        <button class="btn btn-primary accept-btn" id="import-choice-replace" aria-label="Reemplazar"
          data-i18n="ui.replace"></button>
        <button class="btn btn-merge accept-btn" id="import-choice-merge" aria-label="Fusionar"
          data-i18n="ui.merge"></button>
        <button class="btn btn-secondary cancel-btn" id="import-choice-cancel" aria-label="Cancelar"
          data-i18n="ui.cancel"></button>
      </div>
    </section>

    <!-- 
      CONTENEDOR PRINCIPAL DE PROMPTS
      CONTROLADOR: PromptContainerController maneja interacciones CRUD
      RENDERIZADO DINÃMICO: View.renderPrompts() con paginaciÃ³n y filtros aplicados
      PERFORMANCE: Lazy loading y virtual scrolling para grandes datasets
    -->
    <section id="prompt-container" class="main-content-section">
    </section>

    <!-- 
      SISTEMA DE PAGINACIÃ“N
      CONTROLADOR: PaginationController gestiona navegaciÃ³n y elementos por pÃ¡gina
      OPTIMIZACIÃ“N: Reduce carga DOM para grandes colecciones de prompts
      ACCESIBILIDAD: NavegaciÃ³n con teclado y aria-labels
    -->
    <section id="pagination-section" class="pagination-section">
      <!-- CONTENEDOR DE CONTROLES DE PAGINACIÃ“N: Botones prev/next y nÃºmeros de pÃ¡gina -->
      <div id="pagination-container"></div>
      <!-- SELECTOR DE ELEMENTOS POR PÃGINA: 5, 10, 20, 50, 100 opciones -->
      <div id="per-page-container"></div>
    </section>

    <!-- 
      SECCIÃ“N DE CONFIGURACIÃ“N GLOBAL
      FUNCIONALIDADES: Tema oscuro/claro, selecciÃ³n de idioma, informaciÃ³n de copyright
      PERSISTENCIA: Preferencias guardadas en localStorage
    -->
    <section id="configuration" class="configuration">
      <div class="config-left">
        <!-- 
          TOGGLE DE MODO OSCURO
          IMPLEMENTACIÃ“N: CSS custom properties con data-theme attribute
          PERSISTENCIA: Storage.saveDarkModePreference() y Storage.getDarkModePreference()
        -->
        <div class="config-item dark-mode-switch">
          <label for="dark-mode-toggle">
            <span class="switch">
              <input type="checkbox" id="dark-mode-toggle">
              <span class="slider"></span>
            </span>
            <span data-i18n="ui.darkMode"></span>
          </label>
        </div>
        
        <!-- 
          SELECTOR DE IDIOMA
          SISTEMA I18N: window.MESSAGES con soporte es/en
          CAMBIO DINÃMICO: window.applyI18n() re-traduce toda la interfaz
        -->
        <div class="config-item" id="language-switcher-container">
          <label for="language-select" class="config-label" data-i18n="ui.language"></label>
          <select id="language-select" class="config-select">
            <option value="es">EspaÃ±ol</option>
            <option value="en">English</option>
          </select>
        </div>
      </div>
      
      <!-- INFORMACIÃ“N DE COPYRIGHT Y ENLACES EXTERNOS -->
      <div class="config-right">
        <div class="copyright-info">
          <p>Â© CREARED.EDU.CO</p>
          <a href="https://github.com/CREARED-EDU-CO/Prompts-Manager/" target="_blank" rel="noopener noreferrer"
            data-i18n="ui.downloadFromGitHub">
            ðŸ“¥ Descargar desde GitHub
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- 
    MODAL DE CONFIRMACIÃ“N GLOBAL
    PATRÃ“N MODAL: Sistema reutilizable para confirmaciones crÃ­ticas
    IMPLEMENTACIÃ“N: window.showConfirmModal() retorna Promise<boolean>
    ACCESIBILIDAD: Focus trap, escape handling, aria attributes
    USO: EliminaciÃ³n de prompts, carpetas, y operaciones destructivas
  -->
  <div id="confirm-modal" role="dialog" aria-modal="true" aria-labelledby="confirm-modal-msg" tabindex="-1">
    <div class="modal-box modal-content-base">
      <!-- MENSAJE DINÃMICO: Contenido establecido por showConfirmModal(msg) -->
      <div class="modal-msg" id="confirm-modal-msg"></div>
      
      <!-- ACCIONES MODALES: Aceptar/Cancelar con cleanup automÃ¡tico -->
      <div class="modal-actions">
        <button class="btn btn-primary accept-btn" id="confirm-modal-accept" data-i18n="ui.accept">Aceptar</button>
        <button class="btn btn-secondary cancel-btn" id="confirm-modal-cancel" data-i18n="ui.cancel">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- 
    SISTEMA DE NOTIFICACIONES TOAST
    IMPLEMENTACIÃ“N: window.showToast(msg, type, opts)
    TIPOS: 'success', 'error' con iconografÃ­a diferenciada
    DURACIÃ“N: Configurable via window.CONFIG.TOAST_DURATION
    AUTO-DISMISS: setTimeout con fade-out animation
  -->
  <div id="toast" class="toast"></div>

  <!-- 
    JERARQUÃA DE CARGA DE SCRIPTS JAVASCRIPT
    ORDEN CRÃTICO: Dependencias deben cargarse antes que sus consumidores
    
    CAPA 1 - FUNDAMENTOS: Constantes, eventos, performance, utilidades
    CAPA 2 - INTERNACIONALIZACIÃ“N: Sistema de traducciones
    CAPA 3 - PERSISTENCIA Y MODELOS: Storage, modelos de datos
    CAPA 4 - VISTA: Renderizado y manipulaciÃ³n DOM
    CAPA 5 - CONTROLADORES: LÃ³gica de negocio especializada
    CAPA 6 - COORDINACIÃ“N: Controlador principal y bootstrap
  -->
  
  <!-- CAPA 1: FUNDAMENTOS Y UTILIDADES -->
  <script src="js/constants.js"></script>        <!-- ConfiguraciÃ³n global y constantes -->
  <script src="js/eventBus.js"></script>         <!-- Sistema de eventos pub/sub -->
  <script src="js/performance.js"></script>      <!-- Utilidades de optimizaciÃ³n -->
  <script src="js/utils.js"></script>            <!-- Funciones de utilidad general -->
  <script src="js/domUtils.js"></script>         <!-- ManipulaciÃ³n DOM optimizada -->

  <!-- CAPA 2: INTERNACIONALIZACIÃ“N -->
  <script src="js/i18n.js"></script>             <!-- Sistema de traducciones es/en -->

  <!-- CAPA 3: PERSISTENCIA Y MODELOS DE DATOS -->
  <script src="js/storage.js"></script>          <!-- AbstracciÃ³n de localStorage -->
  <script src="js/promptsModel.js"></script>     <!-- Modelo de datos de prompts -->
  <script src="js/foldersModel.js"></script>     <!-- Modelo de datos de carpetas -->

  <!-- CAPA 4: CAPA DE VISTA -->
  <script src="js/view/core.js"></script>        <!-- Funcionalidades principales de renderizado -->
  <script src="js/view/pagination.js"></script>  <!-- Sistema de paginaciÃ³n y filtros -->
  <script src="js/view/folders.js"></script>     <!-- GestiÃ³n de carpetas y utilidades -->

  <!-- CAPA 5: CONTROLADORES ESPECIALIZADOS -->
  <script src="js/controllers/filtersController.js"></script>        <!-- GestiÃ³n de filtros -->
  <script src="js/controllers/paginationController.js"></script>     <!-- Control de paginaciÃ³n -->
  <script src="js/controllers/promptFormController.js"></script>     <!-- Formulario de prompts -->
  <script src="js/controllers/promptContainerController.js"></script><!-- Contenedor de prompts -->
  <script src="js/controllers/foldersController.js"></script>        <!-- GestiÃ³n de carpetas -->
  <script src="js/controllers/importExportController.js"></script>   <!-- I/O de archivos -->
  
  <!-- CAPA 6: COORDINACIÃ“N Y BOOTSTRAP -->
  <script src="js/controller.js"></script>       <!-- Controlador principal MVC -->
  <script src="js/app.js"></script>              <!-- Bootstrap y inicializaciÃ³n -->
</body>

</html>
